<!-- Generated on 2015-04-20 by meteor-stock. Edit me! -->
<template name="postsList">
	<div class="panel panel-default">

		<div class="panel-heading">
			<div class="row">
				<div class="col-md-6">
					<h3 class="panel-title">
						<i class="fa fa-pencil-square-o"></i> Posts
					</h3>
				</div>
				<div class="col-md-6 text-right">
					{{> tooltips title="Posts" content="Share comments and photographs with your Suitemates." }}
					{{> newPost}}
				</div>
			</div>
		</div>

		<!-- 
			Need to change so 'each post' generates a list-group-item,
			see iou_list for an example. This is just a placeholder.
		-->
		<div class="panel-body" id="postsList">
			<div id="container">
				{{#each posts}}
				<div class="post-item" >
					{{> Post}}
				</div>
				{{/each}}
			</div>
		</div>

	</div>		
</template>

<template name="Post">
	<div class="post-container" style="border: 1px solid gray">
		<div class="row">
		  <div class="col-md-11">
				<h4 class="editable-text-trigger">	
					{{> editableText collection="posts" field="message" placeholder="Post message" removeEmpty=true wysiwyg=true beforeUpdate="whoDunnitPosts" beforeInsert="whoDunnitPosts" substitute='<i class="fa fa-pencil"></i>'}}
				</h4>
			</div>
	    <div class="col-md-1" style="text-align:right">
		    <span type="button" class="btn btn-xs btn-danger delete" postId="{{_id}}">
		    	<i class="fa fa-times"></i>
		    </span>
		  </div>
				<!--{{#if imagePath.url}}
					<img class="bulletin-image" src={{imagePath.url}}>
				{{#else}}
					{{> uploader}}	 #TODO: conditional on editing text
				{{/if}}
				-->
		</div>
		<div class="row" style="font-size: 10px">
			<div class="col-md-4"> author: {{getEmail authorId}} </div>
			<div class="col-md-4"> last edited: {{lastEdited}} </div>
			<div class="col-md-4"> last editor: {{getEmail authorId}} </div>
		</div>
	</div>
</template>

<template name="uploader">
	<div class="row">
		<div class="col-md-8">	{{> upload_bootstrap fileTypes='.jpg'
		multiple=false callbacks=myCallbacks}}
		</div>
		{{#if imagePath.url}}
			<div class="col-md-4">
					<span class="btn btn-warning clear" post="{{_id}}">Remove Image</span>
			</div>
		{{/if}}
	</div>
</template>

<template name="newPost">

	<span class="btn btn-md btn-primary my-btn editable-text-trigger new">
		<i class="fa fa-plus"></i> New
	</span>

</template>
